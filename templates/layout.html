<!DOCTYPE html>
<html>
<head>
    <title>Vodkach</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>




<body>

<div class="app-layout">

    <!-- SIDEBAR -->
    <div class="sidebar">

        <div class="sidebar-top">

            <!-- –ú–∞–≥–∞–∑–∏–Ω -->
            <a class="sidebar-item"
               href="{{ url_for('shop') }}">
                üõí –ú–∞–≥–∞–∑–∏–Ω
            </a>

            <!-- –ü–†–ò–ì–õ–ê–®–ï–ù–ò–Ø -->
            <div class="sidebar-section">
                <div class="sidebar-title">–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è</div>

                {% for invite in current_user_invites %}
                    <div class="invite-box">
                        <strong>{{ invite.inviter.username }}</strong><br>
                        | {{ invite.server.name }}

                        <div class="invite-actions">
                            <a href="{{ url_for('accept_invite', invite_id=invite.id) }}">–í—Å—Ç—É–ø–∏—Ç—å</a>
                            <a href="{{ url_for('decline_invite', invite_id=invite.id) }}">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</a>
                        </div>
                    </div>
                {% endfor %}
            </div>

            <!-- –û–±—â–∏–π —á–∞—Ç -->
            <a class="sidebar-item"
               href="{{ url_for('chat') }}">
                # –û–±—â–∏–π —á–∞—Ç
            </a>

            <!-- –õ–° -->
            <div class="sidebar-section">
                <div class="sidebar-title">–õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è</div>

                {% for user in dialog_users %}
                    <a class="sidebar-item"
                       href="{{ url_for('dialog', username=user.username) }}">
                        {{ user.username }}
                    </a>
                {% endfor %}
            </div>

            <!-- –°–ï–†–í–ï–†–´ -->
            <div class="sidebar-section">
                <div class="sidebar-title">–°–µ—Ä–≤–µ—Ä—ã</div>

                {% for server_item in current_user.servers %}

                    <div class="server-block">

                        <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä -->
                        <a class="sidebar-server"
                           href="{{ url_for('server_chat', server_id=server_item.id) }}">

                            {% if server_item.avatar %}
                                <img class="server-avatar"
                                     src="{{ url_for('static', filename='servers/' + server_item.avatar) }}">
                            {% else %}
                                <div class="server-placeholder">
                                    {{ server_item.name[0] }}
                                </div>
                            {% endif %}

                            <span>{{ server_item.name }}</span>
                        </a>

                        <!-- –ö–∞–Ω–∞–ª—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º—ã –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ -->
                        {% if server is defined and server.id == server_item.id %}
                            <div class="server-channels">

                                {% for channel in server_item.channels %}
                                    <a class="sidebar-channel"
                                       href="{{ url_for('channel_chat',
                                                        channel_id=channel.id) }}">
                                        # {{ channel.name }}
                                    </a>
                                {% endfor %}

                            </div>
                        {% endif %}

                    </div>

                {% endfor %}

                <!-- –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä -->
                <a class="sidebar-item"
                   href="{{ url_for('create_server') }}">
                    ‚ûï –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä
                </a>

            </div>

        </div>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å —Å–Ω–∏–∑—É -->
        <div class="sidebar-profile">
            <div class="profile-left">
                {% if current_user.avatar %}
                    <img class="sidebar-avatar"
                         src="{{ url_for('static', filename='avatars/' + current_user.avatar) }}">
                {% else %}
                    <img class="sidebar-avatar"
                         src="{{ url_for('static', filename='avatars/default_avatar.png') }}">
                {% endif %}

                <a class="profile-name-link"
                   href="{{ url_for('profile', username=current_user.username) }}">
                    {{ current_user.username }}
                </a>
            </div>

            <a class="logout-btn"
               href="{{ url_for('logout') }}">
                ‚éã
            </a>
        </div>

    </div>
    <!-- END SIDEBAR -->


    <!-- CHAT AREA -->
    <div class="chat-area">
        {% block content %}{% endblock %}
    </div>


    <!-- MEMBERS PANEL -->
    {% if server is defined %}
    <div class="members-panel">
        <div class="members-title">–£—á–∞—Å—Ç–Ω–∏–∫–∏</div>

        {% for member in server.members %}
            <div class="member-item">
                <span>{{ member.username }}</span>

                {% if current_user.id == server.owner_id
                      and member.id != server.owner_id %}
                    <a class="kick-btn"
                       href="{{ url_for('kick_user',
                                        server_id=server.id,
                                        user_id=member.id) }}">
                        ‚úñ
                    </a>
                {% endif %}
            </div>
        {% endfor %}
    </div>
    {% endif %}

</div>


<!-- EMOJI BUTTON -->

<!-- EMOJI PANEL -->





<script>
function toggleEmojiPanel() {
    const panel = document.getElementById("emojiPanel");
    panel.style.display = panel.style.display === "block" ? "none" : "block";
}

function insertEmoji(filename) {

    const input =
        document.querySelector("input[name='message']") ||
        document.getElementById("message-input");

    if (!input) return;

    input.value += ` :emoji:${filename}: `;
    input.focus();
}
</script>



</body>
</html>
